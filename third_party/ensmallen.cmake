set(ENSMALLEN_PREFIX ensmallen-2.19.0)
set(ENSMALLEN_LIBNAME ensmallen)

set(ENSMALLEN_URL ${CMAKE_CURRENT_SOURCE_DIR}/${ENSMALLEN_PREFIX}.tar.gz)
set(ENSMALLEN_EXTRACT_DIR ${CMAKE_BINARY_DIR}/third_party)
set(ENSMALLEN_SRC_DIR ${ENSMALLEN_EXTRACT_DIR}/${ENSMALLEN_PREFIX})
set(ENSMALLEN_INCLUDE_DIR ${ENSMALLEN_SRC_DIR}/include)

set(BUILD_TESTS OFF)

execute_process( COMMAND ${CMAKE_COMMAND} -E tar xzf ${ENSMALLEN_URL}
                 WORKING_DIRECTORY ${ENSMALLEN_EXTRACT_DIR})

include(ExternalProject)
ExternalProject_Add(${ENSMALLEN_LIBNAME}
  URL               ${ENSMALLEN_URL}
  SOURCE_DIR        ${ENSMALLEN_SRC_DIR}
  BINARY_DIR        "${ENSMALLEN_EXTRACT_DIR}/${ENSMALLEN_PREFIX}"
  CMAKE_CACHE_ARGS  -DCMAKE_INSTALL_PREFIX:PATH=${CMAKE_BINARY_DIR}
  CMAKE_COMMAND     ${CMAKE_COMMAND} -DARMADILLO_INCLUDE_DIR=${CMAKE_BINARY_DIR}/include
  DEPENDS           ${ARMADILLO_LIBNAME}
)

